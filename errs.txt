

The solution proposed has some oddities. Lets fix these to: 1) correcly pair structs from codegen and repo, 2) reduce false positives like naming convention in corepc, 3) ensure correctness in error finding, such that no false negatives pass. 

Lets change the rules, remove a constraint I gave which would be hard to stick to: we dont actually need to replicate corepc closely, we could apply some processing over corepc code in flatten_mods.py such that we have an optimal representation of code for making diffs between codegen vs repo - you chose which representation you find best to compare them anywhere in between repo code style and codegen code style. The current errors are already good, I like them and they are useful already. Still There are way too many inconsistent things and false positives. 

Furthermore the naming given in corepc has its own problems that hopefully you can find a solution so that fields and structs get matched properly.

DO NOT CONSIDER YOUR TASK DONE AT LEAST UNTIL THE ./cmd.sh terminal command IS RETURNING a list of errors that dont lose out on false negatives and has a manageable amount of false positives to handle. 

do not shorten output of cmd.sh, it should contain ALL the errors always.

------------ the situation

Flattened is simply missing some implementations:
``` 
......

/// Result of JSON-RPC method `getaddrmaninfo`.
///
/// > getaddrmaninfo
/// >
/// > Provides information about the node's address manager by returning the number of addresses in the `new` and `tried` tables and their sum for all networks.
#[derive(Clone, Debug, PartialEq, Deserialize, Serialize)]
#[cfg_attr(feature = "serde-deny-unknown-fields", serde(deny_unknown_fields))]
pub struct GetAddrManInfo(pub BTreeMap<String, AddrManInfoNetwork>);
/// Address manager information. Part of `getaddrmaninfo`.
#[derive(Clone, Debug, PartialEq, Deserialize, Serialize)]
#[cfg_attr(feature = "serde-deny-unknown-fields", serde(deny_unknown_fields))]


code continues as normal...
```


The entry part of code generates some problems:
```
<   + GetAddressesbyLabelEntry
<   + GetAddrmanInfoEntry
70,71d67
<   + GetPrioritisedTransactionsEntry
<   + GetRawAddrmanEntryEntry
96d91
<   + GetindexInfoEntry
```

This GetRawAddrmanEntryEntry is not cool, but it seems like a bug in codegen that can be fixed.

The codegen is missing return types for fields that only return one thing or no things.
```
//! | abortrescan                          | returns boolean |                                        |
//! | encryptwallet                        | returns string  |                                        |

These have corresponding types in API: 
pub struct AbortRescan(pub bool);
pub struct EncryptWallet(pub String);

missing from codegen
```

Mismatches in naming:
- Corepc is inconsistent in its namespace. For example GetRPCInfo RPC has ActiveDirectory struct, but according to naming convention from Tobin himself it should have been GetRpcInfoActiveCommands. codegen solution says its GetRpcInfoActiveCommandsItem. It may not be a bad name actually...

GetdeploymentInfo should have been GetDeploymentInfo

-----------------


--------- COMPLETE REPORT:


============================================================
STRUCT COMPARISON REPORT
============================================================

ðŸ“Š Summary:
  Repo structs:     201
  Spec structs:     169
  Only in repo:     148
  Only in spec:     116
  In both:          53

ðŸ”µ Structs only in REPO (148):
  - AbortRescan
  - ActiveCommand
  - AddMultisigAddress
  - AddedNode
  - AddedNodeAddress
  - AddrManInfoNetwork
  - AddressInformation
  - AnalyzePsbtInput
  - AnalyzePsbtInputMissing
  - Banned
  - Bip9Info
  - Bip9Softfork
  - Bip9SoftforkInfo
  - Bip9SoftforkStatistics
  - Bip9Statistics
  - BlockTemplateTransaction
  - ChainState
  - ChainTips
  - DeploymentInfo
  - DeriveAddresses
  - DeriveAddressesMultipath
  - DescriptorInfo
  - DumpTxOutSet
  - DumpWallet
  - EncryptWallet
  - GetAddedNodeInfo
  - GetAddrManInfo
  - GetAddressInfoLabel
  - GetAddressesByLabel
  - GetBalance
  - GetBalancesWatchOnly
  - GetBestBlockHash
  - GetBlockCount
  - GetBlockHash
  - GetBlockHeaderVerbose
  - GetBlockStats
  - GetBlockTemplate
  - GetBlockVerboseOne
  - GetChainStates
  - GetChainTips
  - GetChainTxStats
  - GetConnectionCount
  - GetDeploymentInfo
  - GetDescriptorActivity
  - GetDifficulty
  - GetHdKeys
  - GetIndexInfo
  - GetIndexInfoName
  - GetMemoryInfoStats
  - GetMempoolAncestors
  - GetMempoolAncestorsVerbose
  - GetMempoolDescendants
  - GetMempoolDescendantsVerbose
  - GetNetworkInfoAddress
  - GetNetworkInfoNetwork
  - GetNewAddress
  - GetNodeAddresses
  - GetOrphanTxs
  - GetOrphanTxsVerboseOne
  - GetOrphanTxsVerboseOneEntry
  - GetOrphanTxsVerboseTwo
  - GetOrphanTxsVerboseTwoEntry
  - GetPeerInfo
  - GetRawAddrMan
  - GetRawChangeAddress
  - GetRawMempoolSequence
  - GetRawMempoolVerbose
  - GetReceivedByLabel
  - GetTxOut
  - GetTxOutSetInfo
  - GetTxOutSetInfoBlockInfo
  - GetTxOutSetInfoUnspendables
  - GetTxSpendingPrevout
  - GetTxSpendingPrevoutItem
  - GetZmqNotifications
  - GlobalXpub
  - HdKey
  - HdKeyDescriptor
  - ImportDescriptorsResult
  - ImportMulti
  - ImportMultiEntry
  - JsonRpcError
  - LastProcessedBlock
  - ListAddressGroupings
  - ListBanned
  - ListLabels
  - ListLockUnspent
  - ListLockUnspentItem
  - ListReceivedByAddress
  - ListReceivedByAddressItem
  - ListReceivedByLabel
  - ListReceivedByLabelItem
  - ListTransactions
  - ListUnspent
  - ListUnspentItem
  - ListWalletDirWallet
  - ListWallets
  - LoadTxOutSet
  - LockUnspent
  - Locked
  - Logging
  - MempoolAcceptance
  - MempoolAcceptanceFees
  - MempoolEntry
  - MempoolEntryFees
  - Musig2PartialSig
  - Musig2ParticipantPubkeys
  - Musig2Pubnonce
  - NextBlockInfo
  - NodeAddress
  - PeerInfo
  - PrioritisedTransaction
  - Proprietary
  - PsbtInput
  - PsbtOutput
  - RawAddrManEntry
  - RawFeeDetail
  - RawFeeRange
  - ReceiveActivity
  - ScanBlocksAbort
  - ScanBlocksStart
  - ScanBlocksStatus
  - ScanTxOutSetAbort
  - ScanTxOutSetStart
  - ScanTxOutSetStatus
  - ScanTxOutSetUnspent
  - SendManyVerbose
  - SetNetworkActive
  - SetTxFee
  - SetWalletFlag
  - SignMessageWithPrivKey
  - Signers
  - Softfork
  - SoftforkReject
  - SpendActivity
  - SubmitPackageTxResult
  - SubmitPackageTxResultFees
  - TaprootBip32Deriv
  - TaprootLeaf
  - TaprootScript
  - TaprootScriptPathSig
  - TestMempoolAccept
  - TransactionItem
  - UpgradeWallet
  - UploadTarget
  - VerifyChain
  - VerifyMessage
  - VerifyTxOutProof

ðŸŸ¡ Structs only in SPEC (116) - need to implement:
  + AnalyzePsbtInputsItem
  + AnalyzePsbtInputsItemMissing
  + Api
  + DecodePsbtGlobalXpubsItem
  + DecodePsbtInputsItem
  + DecodePsbtInputsItemBip32DerivsItem
  + DecodePsbtInputsItemFinalScriptSig
  + DecodePsbtInputsItemMusig2PartialSigsItem
  + DecodePsbtInputsItemMusig2ParticipantPubkeysItem
  + DecodePsbtInputsItemMusig2PubnoncesItem
  + DecodePsbtInputsItemNonWitnessUtxo
  + DecodePsbtInputsItemProprietaryItem
  + DecodePsbtInputsItemRedeemScript
  + DecodePsbtInputsItemTaprootBip32DerivsItem
  + DecodePsbtInputsItemTaprootScriptPathSigsItem
  + DecodePsbtInputsItemTaprootScriptsItem
  + DecodePsbtInputsItemWitnessScript
  + DecodePsbtInputsItemWitnessUtxo
  + DecodePsbtInputsItemWitnessUtxoScriptPubKey
  + DecodePsbtOutputsItem
  + DecodePsbtOutputsItemBip32DerivsItem
  + DecodePsbtOutputsItemMusig2ParticipantPubkeysItem
  + DecodePsbtOutputsItemProprietaryItem
  + DecodePsbtOutputsItemRedeemScript
  + DecodePsbtOutputsItemTaprootBip32DerivsItem
  + DecodePsbtOutputsItemTaprootTreeItem
  + DecodePsbtOutputsItemWitnessScript
  + DecodePsbtProprietaryItem
  + DecodePsbtTx
  + DecodeRawTransaction
  + DecodeRawTransactionVinItem
  + DecodeRawTransactionVinItemScriptSig
  + DecodeRawTransactionVoutItem
  + DecodeRawTransactionVoutItemScriptPubKey
  + DumpTxoutSet
  + EnumerateSignersSignersItem
  + EstimateRawFeeLong
  + EstimateRawFeeMedium
  + EstimateRawFeeShort
  + EstimateRawFeeShortFail
  + EstimateRawFeeShortPass
  + FinalizePsbt
  + FundRawTransaction
  + GetAddressesbyLabelEntry
  + GetAddrmanInfoEntry
  + GetBalancesLastprocessedblock
  + GetBlock
  + GetBlockFromPeer
  + GetBlockVerbose
  + GetBlockVerboseAlt
  + GetBlockVerboseAltTxItem
  + GetBlockVerboseAltTxItemVinItem
  + GetBlockVerboseAltTxItemVinItemPrevout
  + GetBlockVerboseAltTxItemVinItemPrevoutScriptPubKey
  + GetBlockVerboseTxItem
  + GetBlockstats
  + GetBlocktemplate
  + GetBlocktemplateTransactionsItem
  + GetChainTxstats
  + GetChainstates
  + GetChainstatesChainstatesItem
  + GetDescriptoractivity
  + GetMemoryInfo
  + GetMemoryInfoLocked
  + GetMempoolEntryFees
  + GetMiningInfoNext
  + GetNetTotalsUploadtarget
  + GetNetworkInfoLocaladdressesItem
  + GetNetworkInfoNetworksItem
  + GetPrioritisedTransactionsEntry
  + GetRawAddrmanEntryEntry
  + GetRawTransaction
  + GetRawTransactionVerbose
  + GetRawTransactionVerboseVinItem
  + GetRawTransactionVerboseVinItemPrevout
  + GetRawTransactionVerboseVinItemPrevoutScriptPubKey
  + GetRawTransactionVinItem
  + GetRawTransactionVinItemScriptSig
  + GetRawTransactionVoutItem
  + GetRawTransactionVoutItemScriptPubKey
  + GetRpcInfoActiveCommandsItem
  + GetTransactionDecoded
  + GetTransactionDetailsItem
  + GetTransactionLastprocessedblock
  + GetTxout
  + GetTxoutScriptPubKey
  + GetTxoutSetInfo
  + GetTxoutSetInfoBlockInfo
  + GetTxoutSetInfoBlockInfoUnspendables
  + GetWalletInfoLastprocessedblock
  + GetWalletInfoScanning
  + GetdeploymentInfo
  + GetdeploymentInfoDeployments
  + GetdeploymentInfoDeploymentsBip9
  + GetdeploymentInfoDeploymentsBip9Statistics
  + GetindexInfoEntry
  + ImportMempool
  + ListDescriptorsDescriptorsItem
  + ListSinceBlockTransactionsItem
  + ListWalletDirWalletsItem
  + LoadTxoutSet
  + ScanBlocks
  + ScanBlocksVerbose
  + ScanTxoutSet
  + ScanTxoutSetUnspentsItem
  + ScanTxoutSetVerbose
  + Sendmany
  + SendmsgToPeer
  + SetWalletflag
  + SignRawTransactionwithKey
  + SignRawTransactionwithKeyErrorsItem
  + SignRawTransactionwithWallet
  + SignRawTransactionwithWalletErrorsItem
  + SubmitPackageTxResults
  + SubmitPackageTxResultsFees
  + UnloadWallet

ðŸ”„ Structs with FIELD DIFFERENCES (30):

  AddPeerAddress:
    Missing in repo: error

  AnalyzePsbt:
    Missing in repo: error, estimated_feerate
    Extra in repo:   estimated_fee_rate
    Type diff 'inputs': repo=Vec<AnalyzePsbtInput> vs spec=Option<Vec<AnalyzePsbtInputsItem>>
    Type diff 'estimated_vsize': repo=Option<u32> vs spec=Option<i64>

  BumpFee:
    Missing in repo: origfee
    Extra in repo:   original_fee

  CreateWalletDescriptor:
    Missing in repo: desc_s
    Extra in repo:   descriptors

  DecodePsbt:
    Type diff 'global_xpubs': repo=Vec<GlobalXpub> vs spec=Vec<DecodePsbtGlobalXpubsItem>
    Type diff 'proprietary': repo=Option<Vec<Proprietary>> vs spec=Vec<DecodePsbtProprietaryItem>
    Type diff 'psbt_version': repo=u32 vs spec=i64
    Type diff 'inputs': repo=Vec<PsbtInput> vs spec=Vec<DecodePsbtInputsItem>
    Type diff 'outputs': repo=Vec<PsbtOutput> vs spec=Vec<DecodePsbtOutputsItem>
    Type diff 'tx': repo=RawTransaction vs spec=DecodePsbtTx
    Type diff 'unknown': repo=Option<HashMap<String, String>> vs spec=std::collections::BTreeMap<String, String>

  DecodeScript:
    Missing in repo: desc
    Extra in repo:   addresses, descriptor, required_signatures

  DecodeScriptSegwit:
    Missing in repo: desc
    Extra in repo:   addresses, descriptor, required_signatures

  EnumerateSigners:
    Type diff 'signers': repo=Vec<Signers> vs spec=Vec<EnumerateSignersSignersItem>

  EstimateRawFee:
    Type diff 'long': repo=RawFeeDetail vs spec=Option<EstimateRawFeeLong>
    Type diff 'medium': repo=Option<RawFeeDetail> vs spec=Option<EstimateRawFeeMedium>
    Type diff 'short': repo=Option<RawFeeDetail> vs spec=Option<EstimateRawFeeShort>

  EstimateSmartFee:
    Missing in repo: feerate
    Extra in repo:   fee_rate
    Type diff 'blocks': repo=u32 vs spec=i64

  GetAddressInfo:
    Missing in repo: desc, hd_masterfingerprint, hd_seedid, ischange, iscompressed, ismine, isscript, iswatchonly, iswitness, parent_desc, script_pub_key, sigsrequired, times_tamp
    Extra in repo:   descriptor, hd_master_fingerprint, hd_seed_id, is_change, is_compressed, is_mine, is_script, is_watch_only, is_witness, parent_descriptor, script_pubkey, sigs_required, timestamp
    Type diff 'script': repo=Option<ScriptType> vs spec=Option<String>

  GetAddressInfoEmbedded:
    Extra in repo:   address, descriptor, hex, is_change, is_compressed, is_script, is_witness, labels, parent_descriptor, pubkey, pubkeys, script, script_pubkey, sigs_required, solvable, witness_program, witness_version

  GetBalances:
    Missing in repo: min_e
    Extra in repo:   mine, watch_only
    Type diff 'last_processed_block': repo=Option<LastProcessedBlock> vs spec=GetBalancesLastprocessedblock

  GetBlockchainInfo:
    Missing in repo: bestblock_hash, chainwork, mediantime, pruneheight
    Extra in repo:   best_block_hash, chain_work, median_time, prune_height
    Type diff 'difficulty': repo=f64 vs spec=i64
    Type diff 'size_on_disk': repo=u64 vs spec=i64
    Type diff 'verification_progress': repo=f64 vs spec=i64

  GetDescriptorInfo:
    Missing in repo: hasprivatekeys, isrange, issolvable
    Extra in repo:   has_private_keys, is_range, is_solvable

  GetMempoolInfo:
    Type diff 'max_data_carrier_size': repo=u64 vs spec=i64
    Type diff 'incremental_relay_fee': repo=f64 vs spec=i64

  GetMiningInfo:
    Missing in repo: network_hashps
    Extra in repo:   network_hash_ps
    Type diff 'difficulty': repo=f64 vs spec=i64
    Type diff 'next': repo=NextBlockInfo vs spec=GetMiningInfoNext
    Type diff 'current_block_weight': repo=Option<u64> vs spec=Option<i64>
    Type diff 'blocks': repo=u64 vs spec=i64

  GetNetTotals:
    Missing in repo: total_bytes_recv, uploadtarget
    Extra in repo:   total_bytes_received, upload_target
    Type diff 'time_millis': repo=u64 vs spec=i64
    Type diff 'total_bytes_sent': repo=u64 vs spec=i64

  GetNetworkInfo:
    Missing in repo: localaddresses, localrelay, localservices, localservicesnames, protocolversion
    Extra in repo:   local_addresses, local_relay, local_services, local_services_names, protocol_version
    Type diff 'connections': repo=usize vs spec=i64
    Type diff 'relay_fee': repo=f64 vs spec=i64
    Type diff 'version': repo=usize vs spec=i64
    Type diff 'time_offset': repo=isize vs spec=i64
    Type diff 'networks': repo=Vec<GetNetworkInfoNetwork> vs spec=Vec<GetNetworkInfoNetworksItem>
    Type diff 'incremental_fee': repo=f64 vs spec=i64
    Type diff 'connections_out': repo=usize vs spec=i64
    Type diff 'connections_in': repo=usize vs spec=i64

  GetRpcInfo:
    Type diff 'active_commands': repo=Vec<ActiveCommand> vs spec=Vec<GetRpcInfoActiveCommandsItem>

  GetTransaction:
    Missing in repo: bip125_replaceable, decoded, details, hex, last_processed_block, mempool_conf_licts, parent_descs, wallet_conf_licts
    Extra in repo:   abandoned, account, address, category, involves_watch_only, label, mempool_conflicts, parent_descriptors, vout, wallet_conflicts
    Type diff 'time': repo=u32 vs spec=i64
    Type diff 'wtxid': repo=Option<String> vs spec=String
    Type diff 'block_time': repo=Option<u32> vs spec=Option<i64>
    Type diff 'time_received': repo=u32 vs spec=i64

  GetWalletInfo:
    Missing in repo: key_poolsize, keypoolsize_hd_internal, paytxfee
    Extra in repo:   keypool_size, keypool_size_hd_internal, pay_tx_fee
    Type diff 'birthtime': repo=Option<u32> vs spec=Option<i64>
    Type diff 'last_processed_block': repo=Option<LastProcessedBlock> vs spec=GetWalletInfoLastprocessedblock
    Type diff 'unlocked_until': repo=Option<u32> vs spec=Option<i64>

  ListDescriptors:
    Type diff 'descriptors': repo=Vec<DescriptorInfo> vs spec=Vec<ListDescriptorsDescriptorsItem>

  ListSinceBlock:
    Type diff 'removed': repo=Vec<TransactionItem> vs spec=Option<Vec<serde_json::Value>>
    Type diff 'transactions': repo=Vec<TransactionItem> vs spec=Vec<ListSinceBlockTransactionsItem>

  ListWalletDir:
    Type diff 'wallets': repo=Vec<ListWalletDirWallet> vs spec=Vec<ListWalletDirWalletsItem>

  PsbtBumpFee:
    Missing in repo: origfee
    Extra in repo:   original_fee

  RestoreWallet:
    Missing in repo: warnings
    Extra in repo:   warning

  SubmitPackage:
    Type diff 'replaced_transactions': repo=Vec<String> vs spec=Option<Vec<String>>
    Type diff 'tx_results': repo=BTreeMap<String, SubmitPackageTxResult> vs spec=std::collections::BTreeMap<String, SubmitPackageTxResults>

  ValidateAddress:
    Missing in repo: error, error_locations, isscript, isvalid, iswitness, script_pub_key
    Extra in repo:   is_script, is_valid, is_witness, script_pubkey
    Type diff 'address': repo=String vs spec=Option<String>

  WalletCreateFundedPsbt:
    Missing in repo: change_pos
    Extra in repo:   change_position

============================================================
